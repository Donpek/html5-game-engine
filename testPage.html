<!DOCTYPE HTML>
<html>
<head>
  <title>HTML Game Engine</title>
  <meta name='viewport' content='width=device-width, initial-scale=1' />

  <script src='jquery-3.2.1.min.js'></script>
  <script src='spritesheet.js'></script>
  <script src='animation.js'></script>
  <script src='keyboard.js'></script>
  <script src='canvas.js'></script>
  <script src='math-stuffs.js'></script>
  <script src='sprite.js'></script>
  <script src='world.js'></script>
</head>

<body style='background:#333'>
  <script language='javascript'>
  var C = null;

  var TILE_W = 32;
  var TILE_H = 32;

  var FPS = 1000/30;

  var sheetPaths = ['sprites/testTile2.png', 'sprites/testTile.png', 'sprites/testSheet.png',
    'sprites/pokemon.png'];
  var sprites = [];

  var map = [1,1,1,1,1,1,1,1,1,1,
             1,1,1,1,1,1,1,1,1,1,
             1,1,0,0,0,0,0,0,1,1,
             1,1,0,0,0,0,0,0,1,1,
             1,1,0,0,0,0,0,0,1,1,
             1,1,0,0,0,0,0,0,1,1,
             1,1,0,0,0,0,0,0,1,1,
             1,1,0,0,0,0,0,0,1,1,
             1,1,1,1,1,1,1,1,1,1,
             1,1,1,1,1,1,1,1,1,1];

  var map_index;

  var px = py = 32;
  var moveSpeed = 2;
  var testAni = new Animation([96,97,98,97,96],[0,3,4,3,2]);

  $(document).ready(function(){
    C = new HTML_Canvas('game', 800, 640, '2d');
    startTrackingKeyboardInput();
    document.documentElement.style.overflow = 'hidden';
    document.body.scroll = 'no';

    spritesheets_loaded_callback = function()
    {


      sprites.push(new Sprite(spritesheets[2]));

      setInterval(function(){
        drawMap();

      if(Keyboard.up) py -= moveSpeed;
      if(Keyboard.right) px += moveSpeed;
      if(Keyboard.down) py += moveSpeed;
      if(Keyboard.left) px -= moveSpeed;

      sprites[3].drawAnimated(px,py,testAni);
      },FPS);
    };

    loadSpritesheets(sheetPaths);
  });
  </script>

  <canvas id="game"></canvas>
</body>
</html>
