<!DOCTYPE HTML>
<html>
<head>
  <title>HTML Game Engine</title>
  <meta name='viewport' content='width=device-width, initial-scale=1' />

  <script src='jquery-3.2.1.min.js'></script>
  <script src='keyboard.js'></script>
  <script src='canvas.js'></script>
  <script src='math-stuffs.js'></script>
  <script src='sprite.js'></script>
  <script src='loader.js'></script>
  <script src='world.js'></script>
</head>

<body style='background:#333'>
  <script language='javascript'>
  var C = null;

  var TILE_W = 32;
  var TILE_H = 32;

  var FPS = 1000/30;

  var tilePaths = ['sprites/testTile.png', 'sprites/testTile2.png', 'sprites/testSheet.png'];

  var map = [1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0,
             1,1,0,0,0,0,0,0,0,0];

  var map_index;

  var px = py = 32;
  var moveSpeed = 5;

  $(document).ready(function(){
    C = new HTML_Canvas('game', 800, 640, '2d');
    startTrackingKeyboardInput();

    sprites_loaded_callback = function()
    {
      setInterval(function(){
        drawMap();

        if(Keyboard.up) py -= moveSpeed;
        if(Keyboard.right) px += moveSpeed;
        if(Keyboard.down) py += moveSpeed;
        if(Keyboard.left) px -= moveSpeed;

        sprites[2].drawAnimated(px,py,[0,1,2,3,4,5]);
      },FPS);
    };

    loadSprites(tilePaths);
  });
  </script>

  <canvas id="game"></canvas>
</body>
</html>
